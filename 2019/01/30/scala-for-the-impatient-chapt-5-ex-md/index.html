<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>scala-for-the-impatient-chapt-5-ex.md | Wei Xin</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/latest/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/latest/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/latest/grids-responsive-min.min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/latest/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><script type="text/javascript" src="//lib.baomitu.com/clipboard.js/latest/clipboard.min.js"></script><script type="text/javascript" src="//lib.baomitu.com/toastr.js/latest/toastr.min.js"></script><link rel="stylesheet" href="//lib.baomitu.com/toastr.js/latest/toastr.min.css"><meta name="generator" content="Hexo 6.3.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">scala-for-the-impatient-chapt-5-ex.md</h1><a id="logo" href="/.">Wei Xin</a><p class="description"></p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> Home</i></a><a href="/archives/"><i class="fa fa-archive"> Archive</i></a><a href="/about/"><i class="fa fa-user"> About</i></a><a href="/atom.xml"><i class="fa fa-rss"> RSS</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">scala-for-the-impatient-chapt-5-ex.md</h1><div class="post-meta">2019-01-30<span> | </span><span class="category"><a href="/categories/programming/">programming</a></span></div><div class="post-content"><h2 id="ex-1"><a href="#ex-1" class="headerlink" title="ex 1"></a>ex 1</h2><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">   * ex 1</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * Improve the Counter class in Section 5.1, “Simple Classes and Parameterless Methods,”</span></span><br><span class="line"><span class="comment">   * on page 55 so that it doesn’t turn negative at Int.MaxValue.</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line"> <span class="class"><span class="keyword">class</span> <span class="title">Counter</span> </span>&#123;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">var</span> value = <span class="number">0</span> <span class="comment">// You must initialize the field</span></span><br><span class="line">   <span class="function"><span class="keyword">def</span> <span class="title">increment</span></span>(): <span class="type">Either</span>[<span class="type">String</span>, <span class="type">Int</span>] = &#123;</span><br><span class="line">     <span class="comment">//      if(value == Int.MaxValue)&#123;</span></span><br><span class="line">     <span class="keyword">if</span> (value == <span class="number">3</span>) &#123;</span><br><span class="line">       <span class="type">Left</span>(<span class="string">&quot;hi, reach the sky already..&quot;</span>)</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">else</span> &#123;</span><br><span class="line">       value += <span class="number">1</span></span><br><span class="line">       <span class="type">Right</span>(value)</span><br><span class="line">     &#125;</span><br><span class="line">   &#125; <span class="comment">// Methods are public by default</span></span><br><span class="line">   <span class="function"><span class="keyword">def</span> <span class="title">current</span></span>() = value</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p>print the result</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">println(<span class="string">&quot;ex 1==========&quot;</span>)</span><br><span class="line">  <span class="keyword">val</span> cnt = <span class="keyword">new</span> <span class="type">Counter</span></span><br><span class="line">  println(cnt.increment())</span><br><span class="line">  println(cnt.increment())</span><br><span class="line">  println(cnt.increment())</span><br><span class="line">  println(cnt.increment())</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>got :</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ex 1==========</span><br><span class="line">Right(1)</span><br><span class="line">Right(2)</span><br><span class="line">Right(3)</span><br><span class="line">Left(hi, reach the sky already..)</span><br></pre></td></tr></table></figure>
<h2 id="ex-2"><a href="#ex-2" class="headerlink" title="ex 2"></a>ex 2</h2><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * ex 2</span></span><br><span class="line"><span class="comment">  * Write a class BankAccount with methods deposit and withdraw, and a read-only property balance.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BankAccount</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">var</span> sum = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">deposit</span></span>(amount: <span class="type">Int</span>) = &#123;</span><br><span class="line">    sum += amount</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">withDraw</span></span>(amount: <span class="type">Int</span>): <span class="type">Either</span>[<span class="type">String</span>, <span class="type">Int</span>] = &#123;</span><br><span class="line">    <span class="keyword">if</span> (amount &gt; sum) &#123;</span><br><span class="line">      <span class="type">Left</span>(<span class="string">&quot;dude, why not rob the bank...&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">      sum -= amount</span><br><span class="line">      <span class="type">Right</span>(amount)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">total</span> </span>= sum</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>test</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> bank = <span class="keyword">new</span> <span class="type">BankAccount</span></span><br><span class="line"> bank.deposit(<span class="number">100</span>)</span><br><span class="line"></span><br><span class="line"> bank.withDraw(<span class="number">200</span>) <span class="keyword">match</span> &#123;</span><br><span class="line">   <span class="keyword">case</span> <span class="type">Left</span>(s) =&gt; println(s)</span><br><span class="line">   <span class="keyword">case</span> <span class="type">Right</span>(i) =&gt; println(i)</span><br><span class="line"> &#125;</span><br><span class="line"> println(bank.total)</span><br></pre></td></tr></table></figure>
<p>got:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ex 2==========</span><br><span class="line">dude, why not rob the bank...</span><br><span class="line">100</span><br></pre></td></tr></table></figure>


<h2 id="ex-3"><a href="#ex-3" class="headerlink" title="ex 3"></a>ex 3</h2><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Write a class Time with read-only properties hours and minutes and a method</span></span><br><span class="line"><span class="comment">  * before(other: Time): Boolean</span></span><br><span class="line"><span class="comment">  * that checks whether this time comes before the other.</span></span><br><span class="line"><span class="comment">  * A Time object should be constructed as new Time(hrs, min), where hrs is in</span></span><br><span class="line"><span class="comment">  * military time format (between 0 and 23).</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @param h</span></span><br><span class="line"><span class="comment">  * @param min</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Time</span>(<span class="params">private val h: <span class="type">Int</span>, private val min: <span class="type">Int</span></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">hour</span></span>: <span class="type">Int</span> = h</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">minute</span></span>: <span class="type">Int</span> = min</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">before</span></span>(other: <span class="type">Time</span>): <span class="type">Boolean</span> =&#123;</span><br><span class="line">    <span class="keyword">if</span>(h == other.h)&#123;</span><br><span class="line">      <span class="keyword">return</span> min &lt; other.min</span><br><span class="line">    &#125;</span><br><span class="line">    h &lt; other.h</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">before2</span></span>(other: <span class="type">Time</span>) : <span class="type">Boolean</span> = h * <span class="number">60</span> + min &lt; other.h * <span class="number">60</span> + other.min</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>test:</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">println(<span class="string">&quot;Time is: &quot;</span> + time.hour + <span class="string">&quot;:&quot;</span> + time.minute)</span><br><span class="line"></span><br><span class="line"> println(time.before(<span class="keyword">new</span> <span class="type">Time</span>(<span class="number">2</span>, <span class="number">30</span>)))</span><br><span class="line"> println(time.before(<span class="keyword">new</span> <span class="type">Time</span>(<span class="number">1</span>, <span class="number">10</span>)))</span><br><span class="line"></span><br><span class="line"> println(time.before2(<span class="keyword">new</span> <span class="type">Time</span>(<span class="number">2</span>, <span class="number">30</span>)))</span><br><span class="line"> println(time.before2(<span class="keyword">new</span> <span class="type">Time</span>(<span class="number">1</span>, <span class="number">10</span>)))</span><br></pre></td></tr></table></figure>

<p>result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ex 3==============</span><br><span class="line">Time is: 1:30</span><br><span class="line">true</span><br><span class="line">false</span><br><span class="line">true</span><br><span class="line">false</span><br></pre></td></tr></table></figure>


<h2 id="ex-4"><a href="#ex-4" class="headerlink" title="ex 4"></a>ex 4</h2><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * Reimplement the Time class from the preceding exercise so that the internal representation is the number</span></span><br><span class="line"><span class="comment">  * of minutes since midnight (between 0 and 24 × 60 – 1). Do not change the public</span></span><br><span class="line"><span class="comment">  * interface. That is, client code should be unaffected by your change.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @param h</span></span><br><span class="line"><span class="comment">  * @param min</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Time2</span>(<span class="params">private val h: <span class="type">Int</span>, private val min: <span class="type">Int</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">val</span> mins: <span class="type">Int</span> = h * <span class="number">60</span> + min</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">hour</span></span>: <span class="type">Int</span> = h</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">minute</span></span>: <span class="type">Int</span> = min</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">before</span></span>(other: <span class="type">Time2</span>) : <span class="type">Boolean</span> = mins &lt; other.mins</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>test:</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">println(<span class="string">&quot;ex 4==============&quot;</span>)</span><br><span class="line"> <span class="keyword">val</span> time2 = <span class="keyword">new</span> <span class="type">Time2</span>(<span class="number">1</span>, <span class="number">30</span>)</span><br><span class="line"> println(<span class="string">&quot;Time is: &quot;</span> + time2.hour + <span class="string">&quot;:&quot;</span> + time2.minute)</span><br><span class="line"></span><br><span class="line"> println(time2.before(<span class="keyword">new</span> <span class="type">Time2</span>(<span class="number">2</span>, <span class="number">30</span>)))</span><br><span class="line"> println(time2.before(<span class="keyword">new</span> <span class="type">Time2</span>(<span class="number">1</span>, <span class="number">10</span>)))</span><br></pre></td></tr></table></figure>

<p>result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ex 4==============</span><br><span class="line">Time is: 1:30</span><br><span class="line">true</span><br><span class="line">false</span><br></pre></td></tr></table></figure>

<h2 id="ex-5"><a href="#ex-5" class="headerlink" title="ex 5:"></a>ex 5:</h2><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * Make a class Student with read-write JavaBeans properties name (of type String) and id (of type Long).</span></span><br><span class="line"><span class="comment">    * What methods are generated? (Use javap to check.)</span></span><br><span class="line"><span class="comment">    * Can you call the JavaBeans getters and setters in Scala? Should you?</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line">    <span class="meta">@BeanProperty</span></span><br><span class="line">    <span class="keyword">var</span> name: <span class="type">String</span> = <span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@BeanProperty</span></span><br><span class="line">    <span class="keyword">var</span> id: <span class="type">Long</span> = <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student2</span>(<span class="params">@<span class="type">BeanProperty</span> var name : <span class="type">String</span>, @<span class="type">BeanProperty</span> var id : <span class="type">Long</span></span>)</span></span><br></pre></td></tr></table></figure>

<p>test:</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">println(<span class="string">&quot;ex 5==============&quot;</span>)</span><br><span class="line">  <span class="keyword">val</span> st = <span class="keyword">new</span> <span class="type">Student</span></span><br><span class="line">  st.setId(<span class="number">124</span>)</span><br><span class="line">  st.setName(<span class="string">&quot;hello&quot;</span>)</span><br><span class="line">  println(st.id)</span><br><span class="line">  println(st.name)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">val</span> st2 = <span class="keyword">new</span> <span class="type">Student2</span>(<span class="string">&quot;hello&quot;</span>,<span class="number">123</span>)</span><br><span class="line">  println(st2.id)</span><br><span class="line">  println(st2.name)</span><br><span class="line">  st2.setName(<span class="string">&quot;world&quot;</span>)</span><br><span class="line">  st2.setId(<span class="number">345</span>)</span><br><span class="line">  println(st2.id)</span><br><span class="line">  println(st2.name)</span><br></pre></td></tr></table></figure>

<p>result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ex 5==============</span><br><span class="line">124</span><br><span class="line">hello</span><br><span class="line">123</span><br><span class="line">hello</span><br><span class="line">345</span><br><span class="line">world</span><br></pre></td></tr></table></figure>

<p>decompile the class, got:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"> xwei  mtvl15397a13f  ~  workspace  …  scala-2.12  classes  chapt5  master 4???? $  ls</span><br><span class="line"><span class="meta prompt_">Exercises$</span><span class="language-bash">.class      Exercises<span class="variable">$Student</span>.class     Exercises<span class="variable">$Time2</span>.class</span></span><br><span class="line"><span class="meta prompt_">Exercises$</span><span class="language-bash">BankAccount.class   Exercises<span class="variable">$Student2</span>.class    Exercises$delayedInit<span class="variable">$body</span>.class</span></span><br><span class="line"><span class="meta prompt_">Exercises$</span><span class="language-bash">Counter.class     Exercises<span class="variable">$Time</span>.class      Exercises.class</span></span><br><span class="line"> xwei  mtvl15397a13f  ~  workspace  …  scala-2.12  classes  chapt5  master 4???? $  javap -private Exercises\$Student</span><br><span class="line">Picked up JAVA_TOOL_OPTIONS: -Dfile.encoding=UTF8</span><br><span class="line">Warning: Binary file Exercises$Student contains chapt5.Exercises$Student</span><br><span class="line">Compiled from &quot;Exercises.scala&quot;</span><br><span class="line">public class chapt5.Exercises$Student &#123;</span><br><span class="line">  private java.lang.String name;</span><br><span class="line">  private long id;</span><br><span class="line">  public java.lang.String name();</span><br><span class="line">  public void name_$eq(java.lang.String);</span><br><span class="line">  public long id();</span><br><span class="line">  public void id_$eq(long);</span><br><span class="line">  public long getId();</span><br><span class="line">  public java.lang.String getName();</span><br><span class="line">  public void setId(long);</span><br><span class="line">  public void setName(java.lang.String);</span><br><span class="line">  public chapt5.Exercises$Student();</span><br><span class="line">&#125;</span><br><span class="line"> xwei  mtvl15397a13f  ~  workspace  …  scala-2.12  classes  chapt5  master 4???? $  javap -private Exercises\$Student2</span><br><span class="line">Picked up JAVA_TOOL_OPTIONS: -Dfile.encoding=UTF8</span><br><span class="line">Warning: Binary file Exercises$Student2 contains chapt5.Exercises$Student2</span><br><span class="line">Compiled from &quot;Exercises.scala&quot;</span><br><span class="line">public class chapt5.Exercises$Student2 &#123;</span><br><span class="line">  private java.lang.String name;</span><br><span class="line">  private long id;</span><br><span class="line">  public java.lang.String name();</span><br><span class="line">  public void name_$eq(java.lang.String);</span><br><span class="line">  public long id();</span><br><span class="line">  public void id_$eq(long);</span><br><span class="line">  public long getId();</span><br><span class="line">  public java.lang.String getName();</span><br><span class="line">  public void setId(long);</span><br><span class="line">  public void setName(java.lang.String);</span><br><span class="line">  public chapt5.Exercises$Student2(java.lang.String, long);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ex-6"><a href="#ex-6" class="headerlink" title="ex 6"></a>ex 6</h2><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * In the Person class of Section 5.1, “Simple Classes and Parameterless Methods,” on page 55,</span></span><br><span class="line"><span class="comment">    * provide a primary constructor that turns negative ages to 0.</span></span><br><span class="line"><span class="comment">    * @param age</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Person</span>(<span class="params">var age: <span class="type">Int</span> = 0</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(age &lt; <span class="number">0</span> ) age = <span class="number">0</span></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>test:</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">println(<span class="string">&quot;ex 6==============&quot;</span>)</span><br><span class="line">  <span class="keyword">val</span> p = <span class="keyword">new</span> <span class="type">Person</span>(<span class="number">5</span>)</span><br><span class="line">  println(p.age)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">val</span> n = <span class="keyword">new</span> <span class="type">Person</span>(<span class="number">-5</span>)</span><br><span class="line">  println(n.age)</span><br></pre></td></tr></table></figure>

<p>result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ex 6==============</span><br><span class="line">5</span><br><span class="line">0</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h2 id="ex-7"><a href="#ex-7" class="headerlink" title="ex 7"></a>ex 7</h2><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Write a class Person with a primary constructor that accepts a string containing a first name,</span></span><br><span class="line"><span class="comment">  * a space, and a last name, such as new Person(&quot;Fred Smith&quot;). Supply read-only properties</span></span><br><span class="line"><span class="comment">  * firstName and lastName. Should the primary constructor</span></span><br><span class="line"><span class="comment">  * parameter be a var, a val, or a plain parameter? Why?</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @param name</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person2</span>(<span class="params">name: <span class="type">String</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">val</span> firstName = name.split(<span class="string">&quot; &quot;</span>)(<span class="number">0</span>)</span><br><span class="line">  <span class="keyword">val</span> lastName = name.split(<span class="string">&quot; &quot;</span>)(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">toString</span></span>: <span class="type">String</span> = <span class="string">&quot;Person2(&quot;</span> + firstName + <span class="string">&quot;, &quot;</span> + lastName + <span class="string">&quot;)&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// primary constructor is a private one</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person3</span> <span class="title">private</span> (<span class="params">names: <span class="type">Array</span>[<span class="type">String</span>]</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">val</span> firstName : <span class="type">String</span> = names(<span class="number">0</span>)</span><br><span class="line">  <span class="keyword">val</span> lastName: <span class="type">String</span> = names(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// second(auxiliary) constructor</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">this</span></span>(name: <span class="type">String</span>)&#123;</span><br><span class="line">    <span class="keyword">this</span>(<span class="type">Person3</span>.parsedName(name))</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">toString</span></span>: <span class="type">String</span> = <span class="string">&quot;Person3(&quot;</span> + firstName + <span class="string">&quot;, &quot;</span> + lastName + <span class="string">&quot;)&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">object</span> <span class="title">Person3</span></span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">parsedName</span></span>(name: <span class="type">String</span>) : <span class="type">Array</span>[<span class="type">String</span>] = &#123;</span><br><span class="line">    <span class="keyword">val</span> names = name.split(<span class="string">&quot; &quot;</span>)</span><br><span class="line">    <span class="keyword">if</span>(names.length &lt; <span class="number">2</span>)&#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="type">IllegalArgumentException</span>(<span class="string">&quot;shuld have firstName and lastName&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    names</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>test:</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"> println(<span class="string">&quot;ex 7==============&quot;</span>)</span><br><span class="line">  <span class="keyword">val</span> p2 = <span class="keyword">new</span> <span class="type">Person2</span>(<span class="string">&quot;Bill Gates&quot;</span>)</span><br><span class="line">  println(p2)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">val</span> p3 = <span class="keyword">new</span> <span class="type">Person3</span>(<span class="string">&quot;hello kitty&quot;</span>)</span><br><span class="line">  println(p3)```</span><br><span class="line"></span><br><span class="line">result:</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>ex 7==============<br>Person2(Bill, Gates)<br>Person3(hello, kitty)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">I have `Person2` and `Person3`m, what&#x27;s the differences?</span><br><span class="line"></span><br><span class="line">```shell</span><br><span class="line"> xwei  mtvl15397a13f  ~  workspace  …  scala-2.12  classes  chapt5  master 6???? $  javap -private Exercises\$Person2.class</span><br><span class="line">Picked up JAVA_TOOL_OPTIONS: -Dfile.encoding=UTF8</span><br><span class="line">Compiled from &quot;Exercises.scala&quot;</span><br><span class="line">public class chapt5.Exercises$Person2 &#123;</span><br><span class="line">  private final java.lang.String firstName;</span><br><span class="line">  private final java.lang.String lastName;</span><br><span class="line">  public java.lang.String firstName();</span><br><span class="line">  public java.lang.String lastName();</span><br><span class="line">  public java.lang.String toString();</span><br><span class="line">  public chapt5.Exercises$Person2(java.lang.String);</span><br><span class="line">&#125;</span><br><span class="line"> xwei  mtvl15397a13f  ~  workspace  …  scala-2.12  classes  chapt5  master 6???? $  javap -private Exercises\$Person3.class</span><br><span class="line">Picked up JAVA_TOOL_OPTIONS: -Dfile.encoding=UTF8</span><br><span class="line">Compiled from &quot;Exercises.scala&quot;</span><br><span class="line">public class chapt5.Exercises$Person3 &#123;</span><br><span class="line">  private final java.lang.String firstName;</span><br><span class="line">  private final java.lang.String lastName;</span><br><span class="line">  public java.lang.String firstName();</span><br><span class="line">  public java.lang.String lastName();</span><br><span class="line">  public java.lang.String toString();</span><br><span class="line">  private chapt5.Exercises$Person3(java.lang.String[]);</span><br><span class="line">  public chapt5.Exercises$Person3(java.lang.String);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ex-8"><a href="#ex-8" class="headerlink" title="ex 8"></a>ex 8</h2><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * Make a class Car with read-only properties for manufacturer, model name, and model year,</span></span><br><span class="line"><span class="comment">  * and a read-write property for the license plate. Supply four constructors.</span></span><br><span class="line"><span class="comment">  * All require the manufacturer and model name. Optionally, model year and license plate can</span></span><br><span class="line"><span class="comment">  * also be specified in the constructor. If not, the model year is set to -1 and the license</span></span><br><span class="line"><span class="comment">  * plate to the empty string. Which constructor are you choosing as the primary constructor? Why?</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @param manufacture</span></span><br><span class="line"><span class="comment">  * @param modelName</span></span><br><span class="line"><span class="comment">  * @param modelYear</span></span><br><span class="line"><span class="comment">  * @param licence</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Car</span>(<span class="params">val manufacture: <span class="type">String</span>,</span></span></span><br><span class="line"><span class="params"><span class="class">          val modelName: <span class="type">String</span>,</span></span></span><br><span class="line"><span class="params"><span class="class">          val modelYear: <span class="type">Int</span> = -1,</span></span></span><br><span class="line"><span class="params"><span class="class">          val licence: <span class="type">String</span> = &quot;&quot;</span>) </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">this</span></span>(manufacture: <span class="type">String</span>, modelName: <span class="type">String</span>, license: <span class="type">String</span>) &#123;</span><br><span class="line">    <span class="keyword">this</span>(manufacture, modelName, <span class="number">-1</span>, license)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">toString</span></span>: <span class="type">String</span> =</span><br><span class="line">    <span class="string">&quot;Car(&quot;</span> + manufacture + <span class="string">&quot;, &quot;</span> + modelName + <span class="string">&quot;, &quot;</span> + modelYear + <span class="string">&quot;, &quot;</span> + licence + <span class="string">&quot;)&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>test:</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">println(<span class="string">&quot;ex 8==============&quot;</span>)</span><br><span class="line"> <span class="keyword">val</span> car1 = <span class="keyword">new</span> <span class="type">Car</span>(<span class="string">&quot;honda&quot;</span>, <span class="string">&quot;civic&quot;</span>, <span class="number">1982</span>, <span class="string">&quot;12366&quot;</span>)</span><br><span class="line"> println(car1)</span><br><span class="line"> <span class="keyword">val</span> car2 = <span class="keyword">new</span> <span class="type">Car</span>(<span class="string">&quot;honda&quot;</span>, <span class="string">&quot;civic&quot;</span>, <span class="number">1982</span>)</span><br><span class="line"> println(car2)</span><br><span class="line"> <span class="keyword">val</span> car3 = <span class="keyword">new</span> <span class="type">Car</span>(<span class="string">&quot;honda&quot;</span>, <span class="string">&quot;civic&quot;</span>, <span class="string">&quot;12356&quot;</span>)</span><br><span class="line"> println(car3)</span><br><span class="line"> <span class="keyword">val</span> car4 = <span class="keyword">new</span> <span class="type">Car</span>(<span class="string">&quot;honda&quot;</span>, <span class="string">&quot;civic&quot;</span>)</span><br><span class="line"> println(car4)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ex 8==============</span><br><span class="line">Car(honda, civic, 1982, 12366)</span><br><span class="line">Car(honda, civic, 1982, )</span><br><span class="line">Car(honda, civic, -1, 12356)</span><br><span class="line">Car(honda, civic, -1, )</span><br></pre></td></tr></table></figure>

<p>after decompile, the java class is looks like this :</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapt5;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Exercises$Car</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">final</span> String manufacture;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> String <span class="title function_">manufacture</span><span class="params">()</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.manufacture;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> String <span class="title function_">modelName</span><span class="params">()</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.modelName;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">modelYear</span><span class="params">()</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.modelYear;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> String <span class="title function_">licence</span><span class="params">()</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.licence;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> Exercises$Car(String manufacture, String modelName, String license)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="built_in">this</span>(manufacture, modelName, -<span class="number">1</span>, license);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Car(&quot;</span> + manufacture() + <span class="string">&quot;, &quot;</span> + modelName() + <span class="string">&quot;, &quot;</span> + modelYear() + <span class="string">&quot;, &quot;</span> + licence() + <span class="string">&quot;)&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> Exercises$Car(String manufacture, String modelName, <span class="type">int</span> modelYear, String licence) &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h2 id="ex-10"><a href="#ex-10" class="headerlink" title="ex 10"></a>ex 10</h2><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * Consider the class</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * class Employee(val name: String, var salary: Double) &#123;</span></span><br><span class="line"><span class="comment">  *   def this() &#123; this(&quot;John Q. Public&quot;, 0.0) &#125;</span></span><br><span class="line"><span class="comment">  * &#125;</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * Rewrite it to use explicit fields and a default primary constructor. Which form do you prefer? Why?</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Employee</span> </span>&#123;</span><br><span class="line">  <span class="keyword">val</span> name : <span class="type">String</span> = <span class="string">&quot;John Q. Pbulic&quot;</span></span><br><span class="line">  <span class="keyword">val</span> salary : <span class="type">Double</span> = <span class="number">0.0</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">toString</span></span>: <span class="type">String</span> = <span class="string">&quot;Employee(&quot;</span> + name + <span class="string">&quot;, &quot;</span> + salary + <span class="string">&quot;)&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>decompile:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Exercises$Employee</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">public</span> String <span class="title function_">name</span><span class="params">()</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.name;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">&quot;John Q. Pbulic&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">salary</span><span class="params">()</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.salary;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">double</span> <span class="variable">salary</span> <span class="operator">=</span> <span class="number">0.0D</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Employee(&quot;</span> + name() + <span class="string">&quot;, &quot;</span> + salary() + <span class="string">&quot;)&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>another attempt:</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Employee2</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">var</span> _name = <span class="string">&quot;John Q. Public&quot;</span></span><br><span class="line">  <span class="keyword">var</span> salary = <span class="number">0.0</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">this</span></span>(n: <span class="type">String</span>, s: <span class="type">Double</span>) &#123;</span><br><span class="line">    <span class="keyword">this</span>()</span><br><span class="line">    _name = n;</span><br><span class="line">    salary = s;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">name</span> </span>= _name <span class="comment">// read-only property, but private var</span></span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">toString</span> </span>= <span class="string">&quot;Employee2(%s, %f)&quot;</span>.format(name, salary)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>decompile:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scala.Predef.;</span><br><span class="line"><span class="keyword">import</span> scala.collection.immutable.StringOps;</span><br><span class="line"><span class="keyword">import</span> scala.runtime.BoxesRunTime;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Exercises$Employee2</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">private</span> String <span class="title function_">_name</span><span class="params">()</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>._name;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">void</span> _name_$eq(String x$<span class="number">1</span>)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="built_in">this</span>._name = x$<span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="type">String</span> <span class="variable">_name</span> <span class="operator">=</span> <span class="string">&quot;John Q. Public&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">salary</span><span class="params">()</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.salary;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> salary_$eq(<span class="type">double</span> x$<span class="number">1</span>)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="built_in">this</span>.salary = x$<span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="type">double</span> <span class="variable">salary</span> <span class="operator">=</span> <span class="number">0.0D</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> Exercises$Employee2(String n, <span class="type">double</span> s)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="built_in">this</span>();</span><br><span class="line">    _name_$eq(n);</span><br><span class="line">    salary_$eq(s);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> String <span class="title function_">name</span><span class="params">()</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">return</span> _name();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">StringOps</span>(Predef..MODULE$.augmentString(<span class="string">&quot;Employee2(%s, %f)&quot;</span>)).format(Predef..MODULE$.genericWrapArray(<span class="keyword">new</span> <span class="title class_">Object</span>[] &#123; name(), BoxesRunTime.boxToDouble(salary()) &#125;));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> Exercises$Employee2() &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>attempt 3:</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Employee3</span>(<span class="params">private var n: <span class="type">String</span>, private var s: <span class="type">Double</span></span>)</span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">name</span></span>: <span class="type">String</span> = n</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">salary</span></span>: <span class="type">Double</span> = s</span><br><span class="line"></span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">toString</span> </span>= <span class="string">&quot;Employee3(%s, %f)&quot;</span>.format(name, salary)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>decompile,got:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scala.Predef.;</span><br><span class="line"><span class="keyword">import</span> scala.collection.immutable.StringOps;</span><br><span class="line"><span class="keyword">import</span> scala.runtime.BoxesRunTime;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Exercises$Employee3</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">private</span> String n;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> String <span class="title function_">n</span><span class="params">()</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.n;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">void</span> n_$eq(String x$<span class="number">1</span>)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="built_in">this</span>.n = x$<span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="type">double</span> <span class="title function_">s</span><span class="params">()</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.s;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">void</span> s_$eq(<span class="type">double</span> x$<span class="number">1</span>)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="built_in">this</span>.s = x$<span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> String <span class="title function_">name</span><span class="params">()</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">return</span> n();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">salary</span><span class="params">()</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">return</span> s();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">StringOps</span>(Predef..MODULE$.augmentString(<span class="string">&quot;Employee3(%s, %f)&quot;</span>)).format(Predef..MODULE$.genericWrapArray(<span class="keyword">new</span> <span class="title class_">Object</span>[] &#123; name(), BoxesRunTime.boxToDouble(salary()) &#125;));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> Exercises$Employee3(String n, <span class="type">double</span> s) &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>compare <code>Employee2</code> and <code>Employe3</code>, looks like only 2 has a auxiliary constructor.</p>
<p>test:</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">println(<span class="string">&quot;ex 10==============&quot;</span>)</span><br><span class="line">  <span class="keyword">val</span> e = <span class="keyword">new</span> <span class="type">Employee</span></span><br><span class="line">  println(e)</span><br><span class="line">  <span class="keyword">val</span> e1 = <span class="keyword">new</span> <span class="type">Employee2</span>(<span class="string">&quot;abc&quot;</span>, <span class="number">10000</span>)</span><br><span class="line">  println(e1)</span><br><span class="line">  <span class="keyword">val</span> e2 = <span class="keyword">new</span> <span class="type">Employee3</span>(<span class="string">&quot;def&quot;</span>, <span class="number">200000</span>)</span><br><span class="line">  println(e2)</span><br></pre></td></tr></table></figure>

<p>got:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ex 10==============</span><br><span class="line">Employee(John Q. Pbulic, 0.0)</span><br><span class="line">Employee2(abc, 10000.000000)</span><br><span class="line">Employee3(def, 200000.000000)</span><br></pre></td></tr></table></figure>
</div><div class="tags"><ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/scala/" rel="tag">scala</a></li></ul></div><div class="post-nav"><a class="pre" href="/2019/02/10/642-design-search-auto-complete-system/">642-design-search-auto-complete-system</a><a class="next" href="/2019/01/26/scala-for-the-impatient-chapter-4-ex-md/">scala-for-the-impatient-chapter-4-ex.md</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://yoursite.com"/></form></div><div class="widget"><div class="author-info"><a class="info-avatar" href="/about/" title="About"><img class="nofancybox" src="/img/avatar.png"/></a><p>To be a better man.</p><a class="info-icon" href="https://twitter.com/username" title="Twitter" target="_blank" style="margin-inline:5px"> <i class="fa fa-twitter-square" style="margin-inline:5px"></i></a><a class="info-icon" href="mailto:admin@domain.com" title="Email" target="_blank" style="margin-inline:5px"> <i class="fa fa-envelope-square" style="margin-inline:5px"></i></a><a class="info-icon" href="https://github.com/username" title="Github" target="_blank" style="margin-inline:5px"> <i class="fa fa-github-square" style="margin-inline:5px"></i></a><a class="info-icon" href="/atom.xml" title="RSS" target="_blank" style="margin-inline:5px"> <i class="fa fa-rss-square" style="margin-inline:5px"></i></a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Categories</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/algorithm-and-data-structure/">algorithm and data structure</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/big-data/">big data</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/distributed/">distributed</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/programming/">programming</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/tools/">tools</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/tags/ssh/" style="font-size: 15px;">ssh</a> <a href="/tags/leetcode/" style="font-size: 15px;">leetcode</a> <a href="/tags/go/" style="font-size: 15px;">go</a> <a href="/tags/networking/" style="font-size: 15px;">networking</a> <a href="/tags/c-c/" style="font-size: 15px;">c/c++</a> <a href="/tags/network/" style="font-size: 15px;">network</a> <a href="/tags/sql/" style="font-size: 15px;">sql</a> <a href="/tags/C/" style="font-size: 15px;">C</a> <a href="/tags/c/" style="font-size: 15px;">c++</a> <a href="/tags/java/" style="font-size: 15px;">java</a> <a href="/tags/scala/" style="font-size: 15px;">scala</a> <a href="/tags/es/" style="font-size: 15px;">es</a> <a href="/tags/system-design/" style="font-size: 15px;">system design</a> <a href="/tags/palindrom/" style="font-size: 15px;">palindrom</a> <a href="/tags/git/" style="font-size: 15px;">git</a> <a href="/tags/binary-search/" style="font-size: 15px;">binary search</a> <a href="/tags/zookeeper/" style="font-size: 15px;">zookeeper</a> <a href="/tags/asm/" style="font-size: 15px;">asm</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Recent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2024/08/08/crackme-11-keygen/">crackme-11-keygen</a></li><li class="post-list-item"><a class="post-list-link" href="/2024/08/06/crackme-9-keygen/">crackme-9-keygen</a></li><li class="post-list-item"><a class="post-list-link" href="/2024/01/12/hello-world/">Hello World</a></li><li class="post-list-item"><a class="post-list-link" href="/2024/01/12/sl4j-log-string-interpolation-vs-concaternation/">sl4j-log-string-interpolation-vs-concaternation</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/05/13/big-endian-vs-little-endian/">big-endian-vs-little-endian</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/05/06/multiple-solutions-for-a-sql-problems/">multiple-solutions-for-a-sql-problems</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/01/07/maximum-of-minimum-values-in-all-subarrays/">maximum-of-minimum-values-in-all-subarrays</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/10/09/design-most-recently-used-queue/">design-most-recently-used-queue</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/08/14/time-wait/">socket connection time-wait</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/07/06/channel-related-issues/">channel-related-issues</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> Links</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2024 <a href="/." rel="nofollow">Wei Xin.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=1.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/latest/jquery.fancybox.min.js"></script><script type="text/javascript" src="/js/fancybox.js?v=1.0.0"></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/latest/jquery.fancybox.min.css"><script type="text/javascript" src="/js/copycode.js?v=1.0.0" successtext="Copy Successed!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css?v=1.0.0"><script type="text/javascript" src="/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=1.0.0"></script></div></body></html>